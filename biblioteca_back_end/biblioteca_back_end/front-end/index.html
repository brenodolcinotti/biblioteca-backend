<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Biblioteca - Frontend</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f4f6f8; margin:0; padding:20px; }
    h1 { text-align:center; }
    section { background:#fff; padding:16px; margin-bottom:20px; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,.1); }
    input, button { padding:8px; margin:4px 0; }
    button { cursor:pointer; }
    ul { list-style:none; padding:0; }
    li { padding:6px 0; border-bottom:1px solid #eee; }
    .row { display:flex; gap:10px; flex-wrap:wrap; }
  </style>
</head>
<body>

<h1>ðŸ“š Sistema de Biblioteca</h1>

<section>
  <h2>Cadastrar Cliente</h2>
  <input id="clienteNome" placeholder="Nome do cliente" />
  <button onclick="criarCliente()">Salvar</button>
  <alert>Cliente Cadastrado</alert>
</section>

<section>
  <h2>Cadastrar Livro</h2>
  <input id="livroNome" placeholder="Nome do livro" />
  <button onclick="criarLivro()">Salvar</button>
</section>

<section>
  <h2>Registrar EmprÃ©stimo</h2>
  <input id="empCliente" type="number" placeholder="ID Cliente" />
  <input id="empLivro" type="number" placeholder="ID Livro" />
  <button onclick="criarEmprestimo()">Emprestar</button>
</section>

<section>
  <h2>Listar Clientes</h2>
  <ul id="listaClientes"></ul>
</section>

<section>
  <h2>Listar Livros</h2>
  <button onclick="listarLivros()">Carregar</button>
  <ul id="listaLivros"></ul>
</section>

<section>
  <h2>Listar EmprÃ©stimos</h2>
  <button onclick="listarEmprestimos()">Carregar</button>
  <ul id="listaEmprestimos"></ul>
</section>

<script src="js/script.js">
const API = 'http://localhost:4567';

async function criarCliente() {
  const nome = clienteNome.value;
  await fetch(`${API}/clientes`, {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify({ nome })
  });
  clienteNome.value = '';
  listarClientes();
}

async function criarLivro() {
  const nome = livroNome.value;
  await fetch(`${API}/livros`, {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify({ nome })
  });
  livroNome.value = '';
  listarLivros();
}

async function criarEmprestimo() {
  const idCliente = empCliente.value;
  const idLivro = empLivro.value;
  await fetch(`${API}/emprestimos`, {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify({ idCliente, idLivro })
  });
  empCliente.value = empLivro.value = '';
  listarEmprestimos();
}

async function listarClientes() {
  const res = await fetch(`${API}/clientes`);
  const data = await res.json();
  listaClientes.innerHTML = data.map(c => `<li>${c.id} - ${c.nome}</li>`).join('');
}

async function listarLivros() {
  const res = await fetch(`${API}/livros`);
  const data = await res.json();
  listaLivros.innerHTML = data.map(l => `<li>${l.id} - ${l.nome}</li>`).join('');
}

async function listarEmprestimos() {
  const res = await fetch(`${API}/emprestimos`);
  const data = await res.json();
  listaEmprestimos.innerHTML = data.map(e => `
    <li>ID ${e.id} | Cliente ${e.idCliente} | Livro ${e.idLivro} | Emp: ${e.localDateEmprestimo} | Dev: ${e.localDateDevolucao ?? 'â€”'}</li>
  `).join('');
}
</script>

</body>
</html>
